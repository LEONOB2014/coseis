<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title>Coseis</title>
<style type="text/css">

body {
    max-width: 760px;
    padding: 0px;
    margin: 0px auto;
    background-color: #eee;
    color: #000;
    font-family: 'Lucida Grande', Geneva, Verdana, sans-serif;
    position: relative;
    line-height: 140%;
}

div.document {
    background-color: #fff;
    padding: 0px 60px;
    border: 1px solid #ccc;
}

img {
    border: none;
    margin: 10px 0px;
}

img.plot {
    margin: 0px -30px;
}

img.align-left, .figure.align-left {
    clear: left;
    float: left;
    margin-right: 1em
}

img.align-right, .figure.align-right {
    clear: right;
    float: right;
    margin-left: 1em
}

img.align-center, .figure.align-center {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

hr {
    border: none;
    border-top: 2px solid #ccc;
}

pre {
    padding: 10px;
    border: 1px solid #ccc;
    background-color: #eee;
    line-height: 100%;
}

a {
    color: #06a;
    text-decoration: none;
}

a:hover, a:active {
    text-decoration: underline;
}

.section li {
    padding: 5px;
}

h1, h1 a, h1 a:hover, h1 a:active {
    color: #900;
    text-decoration: none;
    font-weight: bold;
    margin-bottom: 5px;
}

h2.subtitle {
    font-size: large;
    font-weight: normal;
    margin-top: 5px;
}

h3 {
    border-top: 2px solid #ccc;
    padding-top: 10px;
}

form.search {
    margin-left: 30px;
}

ul.navbar {
    list-style-type: none;
    padding: 0px;
}

.navbar li {
    display: inline;
}

.navbar a {
    background-color: #eee;
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: none;
}

.navbar a:hover, a:active {
    background-color: #ccc;
}

div.box {
    border: 1px solid #aaa;
    margin: 30px 0px;
}

div.box form, div.box p, div.box ul, div.box h4 {
    margin: 15px 30px;
}

div.box h3 {
    background-color: #ccc;
    padding: 4px 30px;
    margin: 0px;
    margin-bottom: 15px;
    font-size: medium;
}

p.topic-title {
    font-size: large;
    font-weight: bold;
}

p.warning {
    padding: 10px;
    border: 1px solid #ccc;
    background-color: #ffd;
}

table {
    width:100%;
    border-collapse: collapse;
    border: 1px solid #aaa;
    margin: 30px 0px;
}

th {
    padding: 4px 30px;
    background-color: #ccc;
    border: none;
    text-align: left;
}

td {
    padding: 4px 30px;
    border: none;
    border-top: 1px solid #eee;
}


</style>
</head>
<body>
<div class="document" id="coseis">
<h1 class="title">Coseis</h1>
<h2 class="subtitle" id="computational-seismology-tools">Computational Seismology Tools</h2>

<ul class="navbar simple">
<li><a class="reference internal" href="#install">Install</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference external" href="sord.html">SORD</a></li>
<li><a class="reference external" href="http://scec.usc.edu/websims">WebSims</a></li>
<li><a class="reference external" href="https://github.com/gely/coseis/">Source Code</a></li>
</ul>
<div class="section" id="summary">
<h3>Summary</h3>
<p>Coseis is an open-source toolkit for earthquake simulation featuring:</p>
<ul class="simple">
<li>The Support Operator Rupture Dynamics (<a class="reference external" href="sord.html">SORD</a>) code for modeling spontaneous
rupture and 3D wave propagation.</li>
<li>SCEC Community Velocity Models (CVM) codes, with MPI parallelization for
<a class="reference external" href="http://www.data.scec.org/3Dvelocity/">Magistrale version</a> (CVM-S), and new <a class="reference external" href="http://earth.usc.edu/~gely/vs30gtl/">geotechnical layer
implementation</a> for the <a class="reference external" href="http://structure.harvard.edu/cvm-h/">Harvard version</a> (CVM-H).</li>
<li><a class="reference external" href="http://scec.usc.edu/websims">WebSims</a> web application for cataloging, exploring, and disseminating large
numerical simulations data sets.</li>
<li>Utilities for mesh generation, coordinate projection, and visualization.</li>
</ul>
<p>The primary interface is through a Python module which (for high-performance
components) wraps Fortran parallelized with MPI.</p>
<p>Coseis is written by <a class="reference external" href="http://www.alcf.anl.gov/~gely/">Geoffrey Ely</a> with contributions from Steven Day,
Bernard Minster, Feng Wang, Zheqiang Shi, and Jun Zhou.  It is licensed under
<a class="reference external" href="http://opensource.org/licenses/BSD-2-Clause">BSD</a> terms.</p>
<p class="warning"><strong>WARNING</strong>: Coseis is a research code under active development.  Changes
are frequent and it has known bugs!</p>
</div>
<div class="section" id="system-requirements">
<h3>System requirements</h3>
<ul class="simple">
<li><a class="reference external" href="http://www.python.org/">Python</a>, and <a class="reference external" href="http://numpy.scipy.org/">NumPy</a> (Numerical Python).</li>
<li><a class="reference external" href="http://git-scm.com/">Git</a> version control system.</li>
<li>(+) Fortran 95 compiler.  Required only for SORD and CVM-S modules.</li>
<li>(+) Message Passing Interface (MPI) library.  Required only for
multiprocessing with SORD and CVM-S.</li>
<li>(+) <a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a>, <a class="reference external" href="http://www.scipy.org/">SciPy</a>, and Pyproj Python packages.  Required only for
supplemental plotting, signal processing, and mesh generation utilities.</li>
</ul>
<p>(+) Optional</p>
</div>
<div class="section" id="install">
<h3>Install</h3>
<p>Fortran and MPI installation should only be necessary for personal computers.
HPC systems generally supply specifically tuned Fortran compilers and MPI
libraries.</p>
<ol class="arabic">
<li><p class="first">GNU Fortran is recommended if you don't already have a Fortran 95 compiler.</p>
<p>Fedora/Red Hat Linux:</p>
<pre class="literal-block">
sudo yum install gfortran git
</pre>
<p>Ubuntu Linux:</p>
<pre class="literal-block">
sudo apt-get install gfortran git
</pre>
<p>For Mac OS X, first install <a class="reference external" href="http://itunes.apple.com/us/app/xcode/id497799835">Xcode</a> and <a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a>, and then do:</p>
<pre class="literal-block">
brew install gfortran git
</pre>
</li>
<li><p class="first">If you need MPI (for SORD of CVMS), <a class="reference external" href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH2</a> is recommended.</p>
</li>
<li><p class="first">For plotting and visualization, Enthought Python Distribution (<a class="reference external" href="http://www.enthought.com/products/epddownload.php">EPD</a>) is
recommended.</p>
</li>
<li><p class="first">Clone the source code from the <a class="reference external" href="http://github.com/gely/coseis">Coseis GitHub repository</a> using <a class="reference external" href="http://git-scm.com/">Git</a>:</p>
<pre class="literal-block">
git clone git://github.com/gely/coseis.git
</pre>
<p>Update to the latest changes anytime with:</p>
<pre class="literal-block">
git pull
</pre>
</li>
<li><p class="first">For laptop and workstation installations, the default system configuration
is usually be adequate.  To test the default configuration:</p>
<pre class="literal-block">
cd coseis/
python setup.py
</pre>
<p>Systems with batch schedulers (such as PBS or LoadLeveler) generally require
custom configuration to specify system resources, compiler options, and
scheduler scripts.  If Coseis has already been configured for your system you
can use one of the included configurations.  For example, for the TeraGrid
Ranger system at TACC:</p>
<pre class="literal-block">
python setup.py --machine=tacc-ranger
</pre>
<p>To see the list of included configurations look in the <tt class="docutils literal">cst/conf/</tt> directory.
Each custom configuration is located in a separate sub-directory.  To create a
new custom configuration, make a new sub-directory following the example of
the supplied configurations.</p>
</li>
<li><p class="first">Build the components you need (options are: <tt class="docutils literal">sord</tt>, <tt class="docutils literal">cvms</tt>,
<tt class="docutils literal">cvmh</tt>, <tt class="docutils literal">cfm</tt>, <tt class="docutils literal">rspectra</tt>, <tt class="docutils literal">mapdata</tt>). For example:</p>
<pre class="literal-block">
python setup.py sord cvmh cfm mapdata
</pre>
</li>
<li><p class="first">You may want to run the test suite (requires <a class="reference external" href="http://readthedocs.org/docs/nose/">nose</a> testing framework):</p>
<pre class="literal-block">
nosetests
</pre>
</li>
<li><p class="first">Finally, set path variables for the Pyhon module and executables. For bash
shell, with the code located in your home directory (for example) add these
lines to <tt class="docutils literal">.bash_profile</tt>:</p>
<pre class="literal-block">
export PYTHONPATH=&quot;$HOME/coseis&quot;
export PATH=&quot;$PATH:$HOME/coseis/bin&quot;
</pre>
</li>
</ol>
</div>
<div class="section" id="examples">
<h3>Examples</h3>
<div class="section" id="cvm-depth-planes">
<h4>CVM depth planes</h4>
<img alt="../scripts/cvm/cvms-vs500.png" src="../scripts/cvm/cvms-vs500.png" />
<img alt="../scripts/cvm/cvmh-vs500.png" src="../scripts/cvm/cvmh-vs500.png" />
<p>Extract S-wave velocity at 500 meters depth. Plot using Matplotlib</p>
<pre class="literal-block">
cd scripts/cvm
python plane.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/cvm/plane.py">plane.py</a></p>
</div>
<div class="section" id="cvm-s-fence-diagram">
<h4>CVM-S fence diagram</h4>
<img alt="../scripts/cvm/cvms-vp-fence.png" src="../scripts/cvm/cvms-vp-fence.png" />
<p>Build a fence diagram similar to Magistrale (2000) figure 10. Plot using
Mayavi:</p>
<pre class="literal-block">
cd scripts/cvm
python fence.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/cvm/fence.py">fence.py</a></p>
</div>
<div class="section" id="cvm-s-basin-depth">
<h4>CVM-S Basin depth</h4>
<img alt="../scripts/basindepth/cvm-z25.png" src="../scripts/basindepth/cvm-z25.png" />
<p>Extract 3D mesh and search for the shallowest surface of Vs = 2.5 km/s.
Plot over topography using Mayavi:</p>
<pre class="literal-block">
cd scripts/basindepth
python mesh.py
python search.py
python viz.py
</pre>
<p>Source code:
<a class="reference external" href="../scripts/basindepth/mesh.py">mesh.py</a>
<a class="reference external" href="../scripts/basindepth/search.py">search.py</a>
<a class="reference external" href="../scripts/basindepth/viz.py">viz.py</a></p>
</div>
</div>
</div>
</body>
</html>

SCECVM bug fixes and parallel binary I/O

Geoffrey Ely
gely@ucsd.edu
2006 Sep 6

These files must be combined with the SCECVM 4.0 distribution.

Input files:
  nn: acsii file containing the number mesh nodes
  rlon: binary file containing nn longitude values
  rlat: binary file containing nn latitude values
  rdep: binary file containing nn depth values

Output files:
  rho: binary file containing nn density values
  vp:  binary file containing nn V_p values
  vp:  binary file containing nn V_s values

EXAMPLE USAGE

Compile and run a TeraShake mesh generator:
  f90 utm.f90 tscoords.f90 tsgrid.f90 -o tsgrid
  ./tsgrid

Compile and run the CVM serial version
  f90 iobin.f scecvm4.f -o scecvm4
  ./scecvm4

Compile and run the CVM MPI version
  mpif90 iompi.f scecvm4.f -o scecvm4-mpi
  mpiexec -np 16 ./scecvm4-mpi


NOTES ON BUG FIXES

Any open statements with the syntax type='old', change to standard
syntax status='old'.

Add the following line to subroutine makevel2:

       rd2rad=3.141593/180.

Do not rely on the compiler to initialize variables to zero.
Add to the begining of the main program:

       inct = 0
       incto = 0
       do i = 1,isurmx
         iiiold(i) = 0
         inorold(i) = 0
         rsuqold(i) = 0.
       end do

Add inside the first do loop of subroutine addtops:

       rtvels(n)=0.
       rtewts(n)=0.

Add to the beginning of subroutine makereg:

       alp = 0.
       bet = 0.

Add inside of do loops in subroutine readup

       rlaup(i) = 0.
       rloup(i) = 0.


SDSC IA-64 CLUSTER

I found it necessary modify my .soft file as follows to get MPI
working correctly.

  @remove +intel-compilers
  @remove +intel-c-8.0.066-f-8.0.046-r1
  @remove +mpich-gm-intel
  +intel-c-9.0.032-f-9.0.033
  +mpich-gm-1.2.6-intel9032
  @teragrid


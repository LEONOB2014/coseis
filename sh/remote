#!/bin/bash -e

account="ux451302@dslogin.sdsc.edu"
account="phim.ucsd.edu"
account="curl"
account="babieca.sdsu.edu"
account="ux451302@tg-login2.sdsc.teragrid.org"
account="altai.sdsu.edu"
account="moho.sdsu.edu"

echo -e "\n$account"

ssh-add -L > /dev/null || ssh-add

files="
  readme
  sord
  defaults.m
  in.m
  in
  sh
  f
  m
"

rfiles=$( echo $files | sed 's|\([^ ]\+\)|sord/\1|g' )

case "$1" in
get) rsync -avub -e ssh --backup-dir=old $account:"$rfiles" . ;;
*)   rsync -av   -e ssh --delete $files "$account:sord" ;;
esac


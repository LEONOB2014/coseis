#!/bin/bash -e

list="1"

accounts="\
  kim
  phim.ucsd.edu
  moho.sdsu.edu
  altai.sdsu.edu
  ux451302@dslogin.sdsc.edu
  ux451302@tg-login2.sdsc.teragrid.org
  babieca.sdsu.edu"

files="\
  versionmeta.m
  email
  doc
  sord
  in.m
  in
  sh
  f
  m
  util
  scecvm4
  data"

echo "SORD remote install"

rfiles=$( echo "$files" | sed '/^$/d; s|^ *|sord/|g' )
files=$( echo $files )
rfiles=$( echo $rfiles )

echo "$accounts" | cat -b
echo -n "hosts [$list]: "
read i
[ -n "$i" ] && list="$i"

for i in $list; do
  account=$( echo "$accounts" | sed -n ${i}p )
  echo $account
  rsync -av --delete --exclude='srcdir.m' --exclude='versionmeta.m' $files $account:sord
done


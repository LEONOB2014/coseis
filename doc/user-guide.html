<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>SORD User Guide</title>
<link rel="stylesheet" href="/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/docutils-0.5-py2.5.egg/docutils/writers/html4css1/html4css1.css" type="text/css" />
</head>
<body>
<div class="document" id="sord-user-guide">
<h1 class="title">SORD User Guide</h1>

<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#author" id="id2">Author</a></li>
<li><a class="reference internal" href="#install-test-and-run" id="id3">Install, test and run</a></li>
<li><a class="reference internal" href="#input-and-output" id="id4">Input and Output</a></li>
</ul>
</div>
<div class="section" id="summary">
<h1><a class="toc-backref" href="#id1">Summary</a></h1>
<p>The Support Operator Rupture Dynamics (SORD) code simulates spontaneous rupture
within a 3D isotropic viscoelastic solid.  Wave motions are computed on a
logically rectangular hexahedral mesh, using the generalized finite difference
method of support operators.  Stiffness and viscous hourglass corrections are
employed to suppress suppress zero-energy grid oscillation modes.  The fault
surface is modeled by coupled double nodes, where the strength of the coupling
is determined by a linear slip-weakening friction law.  External boundaries may
be reflective or absorbing, where absorbing boundaries are handled using the
method of perfectly matched layers (PML).  SORD is written in Fortran 95 and
parallelized for multi-processor execution using Message Passing Interface
(MPI).</p>
</div>
<div class="section" id="author">
<h1><a class="toc-backref" href="#id2">Author</a></h1>
<blockquote>
<div class="line-block">
<div class="line">Geoffrey Ely</div>
<div class="line"><a class="reference external" href="mailto:gely&#37;&#52;&#48;usc&#46;edu">gely<span>&#64;</span>usc<span>&#46;</span>edu</a></div>
<div class="line">University of Southern California</div>
<div class="line"><a class="reference external" href="http://earth.usc.edu/~gely">http://earth.usc.edu/~gely</a></div>
</div>
</blockquote>
</div>
<div class="section" id="install-test-and-run">
<h1><a class="toc-backref" href="#id3">Install, test and run</a></h1>
<p>SORD has been tested on the following system configurations:</p>
<blockquote>
<div class="line-block">
<div class="line">Operating systems: Linux, IBM AIX, Apple OSX, Sun Solaris</div>
<div class="line">Fortran 95 compilers: GNU, IBM, Intel, Sun, Portland Group</div>
<div class="line">MPI implementations: ANL MPICH, IBM, Myricom MPICH-GM</div>
</div>
</blockquote>
<p>On many systems SORD will be ready to go as is, but may benefit from fine
tuning.  Machines with specialized parallel environments will take extra
configuration.  Here are the steps for installation and testing SORD:</p>
<p>1.  SORD is distributed as a gzipped tar archive.  Unpack the archive and enter
the 'sord' directory:</p>
<pre class="literal-block">
tar zxvf sord.tgz
cd sord/
</pre>
<p>2.  Configuration, compilation and execution are all handled by a wrapper
script called <tt class="docutils literal"><span class="pre">sord</span></tt>  The script takes an input file as its argument, and
takes a number of optional flags (documented within the script).  First, test
serial compilation by running the script:</p>
<pre class="literal-block">
./sord -s in/test/tpv3test.m
</pre>
<p>The <tt class="docutils literal"><span class="pre">-s</span></tt> flag ensures that SORD operates in serial mode.  Porting to a new
machine may require modifying compiler options by editing the script
<tt class="docutils literal"><span class="pre">sh/config</span></tt>.</p>
<p>3.
Next, test serial execution:</p>
<pre class="literal-block">
./sord -si
</pre>
<p>The <tt class="docutils literal"><span class="pre">-i</span></tt> flag tells SORD to run interactively.  When no input file specified,
the most recent one will be used.  You should receive status messages to the
screen, ending with 'Finished!' when the run is complete.  Each time SORD is
executed, a new directory is set up for the particular run, starting with
<tt class="docutils literal"><span class="pre">run/01</span></tt>.  The directory contains the executable and scripts to run the code,
and will contain all of the generated output and metadata.</p>
<p>4. The parallel version requires MPI.  If MPI is not already installed, MPICH2
is recommended.  It is available from Argonne National Lab:</p>
<blockquote>
<a class="reference external" href="http://www.mcs.anl.gov/research/projects/mpich2">http://www.mcs.anl.gov/research/projects/mpich2</a></blockquote>
<p>Example install commands for MPICH2:</p>
<pre class="literal-block">
./configure -prefix=$HOME/local --with-device=ch3:shm --enable-f90 --disable-cxx
make install
</pre>
<p>5.
Test parallel compilation:</p>
<pre class="literal-block">
./sord -pd
</pre>
<p>The <tt class="docutils literal"><span class="pre">-p</span></tt> flag specifies parallel mode, and the <tt class="docutils literal"><span class="pre">-d</span></tt> flag deletes previous
run derctories that we don't need anymore.</p>
<p>6. Launching MPI jobs varies among parallel environments, such as MPD, PBS or
LoadLeveler.  If SORD is already properly configured for your environment, you
will be able to enter the run directory and start the job interactively with
the <tt class="docutils literal"><span class="pre">run</span></tt> script, or submit the job to the batch system with the <tt class="docutils literal"><span class="pre">que</span></tt>
script:</p>
<pre class="literal-block">
cd out/01
./run   # (or ./que)
</pre>
<p>If you are porting to a new environment, you may have to create a custom
configuration script.  See <tt class="docutils literal"><span class="pre">sh/datastar</span></tt> and <tt class="docutils literal"><span class="pre">sh/teragrid</span></tt> for examples.
The configuration script should be named exactly as is returned from the
<tt class="docutils literal"><span class="pre">hostname</span></tt> command and placed in the <tt class="docutils literal"><span class="pre">sh/</span></tt> directory, and it will be
automatically executed on that system.  If the hostname is not consistent
between logins, you may be to devise another means to identify the system. Look
at the <tt class="docutils literal"><span class="pre">sh/config</span></tt> script for examples.</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">user-guide.txt</tt>, line 114)</p>
<p>Unknown directive type &quot;tex-math&quot;.</p>
<pre class="literal-block">
.. tex-math::

  \sqrt{2^3}

</pre>
</div>
</div>
<div class="section" id="input-and-output">
<h1><a class="toc-backref" href="#id4">Input and Output</a></h1>
<p>Input is specified as key value pairs in a text file.  As a convenience, the
input file may be valid Python, MATLAB, or Bash shell code.  This practice
facilitates using the input parameters in other pre- or post-processing tasks.
Large data sets such as the material model are stored separately in
floating-point binary files.  Annotated example input files are located in the
<tt class="docutils literal"><span class="pre">in/</span></tt> directory.  The input file <tt class="docutils literal"><span class="pre">defaults.m</span></tt>, that is read before any
other input, contains a short description of each SORD parameter.</p>
<p>Output is saved in binary formant.  Associated metadata files <tt class="docutils literal"><span class="pre">meta.py</span></tt> and
'meta.m' contain a summary of parameters for the run, and a structured
description of the binary output.  MATLAB utilities for manipulating and
visualizing SORD output are included in the <tt class="docutils literal"><span class="pre">m/</span></tt> directory.  Using the
<tt class="docutils literal"><span class="pre">read4d</span></tt> function for accessing SORD binary output correctly accounts for
byte order when moving data between big-endian and little-endian architectures.
Separate Fortran utilities are also included in the <tt class="docutils literal"><span class="pre">util/</span></tt> directory for
converting the byte order of binary files, and for converting to and from ASCII
text format.</p>
<p>Statistic, such as peak acceleration and peak velocity, are computed
periodically during each run and stored in the directory <tt class="docutils literal"><span class="pre">stats/</span></tt>.
Additionally, internal code timings, for benchmarking performance, are
collected and saved to the <tt class="docutils literal"><span class="pre">prof/</span></tt> directory.  Inspecting these files during
a run is a good way to check that it is proceeding correctly.  The raw binary
files can be examined with the standard UNIX command <tt class="docutils literal"><span class="pre">od</span> <span class="pre">-f</span></tt> or with the
included Fortran utilities.  The <tt class="docutils literal"><span class="pre">stats</span></tt> utility computes the minimum,
maximum, and mean values for binary files.</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="user-guide.txt">View document source</a>.
Generated on: 2008-08-28.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>

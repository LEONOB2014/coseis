# KAUST Shaheen: IBM Blue Gene/P
account: k68
maxcores: 4
maxram: 4096
ppn_range: [1, 2, 4]
nthread: 1
queue: default
queue_opts: [
    [development, {maxnodes:  8192, maxtime:   30}],
    [smallblocks, {maxnodes:  1024, maxtime: 1440}],
    [pset64,      {maxnodes:  4096, maxtime: 1440}],
    [pset128,     {maxnodes: 12288, maxtime: 1440}],
    [default,     {maxnodes: 16384, maxtime: 1440}],
]
launch: mpirun -mode VN -np {nproc} -exe {command}
submit: llsubmit {submit_flags} "{name}.sh"

script: |
    #!/bin/sh
    # @ account_no = {account}
    # @ class = {queue}
    # @ job_name = {name}
    # @ bg_size = {nodes}
    # @ wall_clock_limit = {walltime}
    # @ error = {name}.err
    # @ output = {name}.out
    # @ notify_user = {email}
    # @ notification = never
    # @ job_type = bluegene
    # @ environment = COPY_ALL
    # @ queue
    cd "{rundir}"
    env > "{name}.env"
    date
    {pre}
    {launch}
    {post}
    date

# ALCF IBM Blue Gene/P
account: GroundMotion_esp
maxcores: 4
maxram: 2048
host_opts: {
    challenger: {maxnodes: 512,   maxtime: 60,   queue: prod-devel},
    surveyor:   {maxnodes: 1024,  maxtime: 60,   queue: default},
    intrepid:   {maxnodes: 40960, maxtime: 1440, queue: prod},
}

# TAU
launch:
    cobalt-mpirun -mode vn -verbose 2
    -np {nproc} -env "TAU_METRICS=BGPTIMERS" {command}

# MPI
ppn_range: [1, 2, 4]
nthread: 1
launch:
    cobalt-mpirun -mode vn -verbose 2 -np {nproc}
        {command}

# MPI + OpenMP
ppn_range: [1]
nthread: 4
launch:
    cobalt-mpirun -mode smp -verbose 2 -np {nproc}
    -env OMP_NUM_THREADS={nthread} {command}

# job submission
notify_flag: -M {email}
depend_flag: --dependenices {depend}
submit:
    qsub --mode script
    -O {name} -A {account} -q {queue} -n {nodes} -t {minutes}
    {notify_flag} {depend_flag} {submit_flags} "{name}.sh"

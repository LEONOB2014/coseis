<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="docs/style.css">
</head>
<body>
<div class="document">
<h1 id="coseis">Coseis</h1>
<h2 id="computational-seismology-tools">Computational Seismology Tools</h2>
<p><nav></p>
<ul>
<li><a href="#install">Install</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="docs/SORD.html">SORD</a></li>
<li><a href="https://github.com/gely/coseis/">Code</a></li>
</ul>
<p></nav></p>
<h3 id="summary">Summary</h3>
<p>Coseis is an open-source toolkit for earthquake simulation featuring:</p>
<ul>
<li><p>The Support Operator Rupture Dynamics (SORD) code for modeling spontaneous rupture and 3D wave propagation.</p></li>
<li><p>SCEC Community Velocity Models (CVM) codes, with MPI parallelization for <a href="http://www.data.scec.org/3Dvelocity/">Magistrale version</a> (CVM-S), and new <a href="http://earth.usc.edu/~gely/vs30gtl/">geotechnical layer implementation</a> for the <a href="http://structure.harvard.edu/cvm-h/">Harvard version</a> (CVM-H).</p></li>
<li><p>Utilities for mesh generation, coordinate projection, and visualization.</p></li>
</ul>
<p>The primary interface is through a Python module which (for high-performance components) wraps Fortran parallelized with hybrid OpenMP and MPI.</p>
<p>Coseis is written by <a href="http://earth.usc.edu/~gely/">Geoffrey Ely</a> with contributions from Steven Day, Bernard Minster, Feng Wang, Zheqiang Shi, and Jun Zhou. It is licensed under <a href="http://opensource.org/licenses/BSD-2-Clause">BSD</a> terms.</p>
<p><strong>WARNING</strong>: Coseis is a research code under active development. Changes are frequent and it has known bugs!</p>
<h3 id="install">Install</h3>
<ol type="1">
<li><p>If on Mac OS X, first install <a href="http://itunes.apple.com/us/app/xcode/id497799835">Xcode</a> from the App Store. From the Xcode preferences pane, install the Command Line Tools. Then install <a href="http://mxcl.github.com/homebrew/">Homebrew</a>, followed by <a href="http://git-scm.com/">Git</a> and <a href="http://r.research.att.com/tools/">Fortran</a> with::</p>
<pre><code>brew install git gfortran</code></pre>
<p>OpenMP is broken in GCC 4.3 on Lion, so if you need multiprocessing speed-up, install either <a href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH</a> or a newer <a href="http://gcc.gnu.org/">GCC</a> version. Optionally, install and <a href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> for visualization and analysis.</p></li>
<li><p>Clone the source code from the [Coseis GitHub repository] (http://github.com/gely/coseis):</p>
<pre><code>git clone git://github.com/gely/coseis.git</code></pre></li>
<li><p>Set path variables for the Python module and executables. For bash shell, with the code located in your home directory (for example) add these lines to</p>
<pre><code>export PYTHONPATH=&quot;$HOME/coseis&quot;
export PATH=&quot;$PATH:$HOME/coseis/bin&quot;</code></pre></li>
<li><p>Run the <code>setup.py</code> script to test your configuration. This will display all of the configuration parameters::</p>
<pre><code>python setup.py</code></pre></li>
<li><p>These parameters may be customized by creating a file <code>cst/conf/site.py</code>. For example, the account for billing of service units, and email address for notifications may be specified in <code>site.py</code> module with::</p>
<pre><code>account = &#39;your_project_name_here&#39;
email = &#39;your.email@address.here&#39;</code></pre></li>
</ol>
<h3 id="testing">Testing</h3>
<p>To run the test suite interactively::</p>
<pre><code>cd cst/tests
python test_runner.py --run=exec</code></pre>
<p>Or, submit a job for batch processing::</p>
<pre><code>python test_runner.py --run=submit</code></pre>
<p>After completion, a report is printed to the screen (or saved in <code>run/test_suite/test_suite.output</code>)::</p>
<pre><code>PASSED: doctest.testmod(cst.util)
PASSED: doctest.testmod(cst.coord)
PASSED: doctest.testmod(cst.sord)
PASSED: cst.tests.syntax.test()
PASSED: cst.tests.configure.test()
PASSED: cst.tests.hello_mpi.test()
PASSED: cst.tests.point_source.test()
PASSED: cst.tests.pml_boundary.test()
PASSED: cst.tests.kostrov.test()</code></pre>
<h3 id="examples">Examples</h3>
<h4 id="cvm-depth-plane">CVM depth plane</h4>
<p><img src="figures/CVM-Depth-Plane-Vs-S.png" /> <img src="figures/CVM-Depth-Plane-Vs-H.png" /></p>
<p>Extract S-wave velocity at 500 meters depth. Plot using Matplotlib::</p>
<pre><code>cd scripts
python CVM-Depth-Plane.py</code></pre>
<p>Source code: <a href="scripts/CVM-Depth-Plane.py">CVM-Depth-Plane.py</a></p>
<h4 id="cvm-s-fence-diagram">CVM-S fence diagram</h4>
<figure>
<img src="figures/CVM-Fence-Vp-S.png" />
</figure>
<p>Build a fence diagram similar to Magistrale (2000) figure 10. Plot using Mayavi::</p>
<pre><code>python CVM-Fence.py</code></pre>
<p>Source code: <a href="scripts/CVM-Fence.py">CVM-Fence.py</a></p>
<h4 id="cvm-s-basin-depth">CVM-S basin depth</h4>
<figure>
<img src="figures/CVM-Basins.png" />
</figure>
<p>Extract 3D mesh and search for the shallowest surface of Vs = 2.5 km/s. Plot over topography using Mayavi::</p>
<pre><code>python Basins-Mesh.py
python Basins-Search.py
python Basins-Viz.py</code></pre>
<p>Source code:<br /><a href="scripts/CVM-Basins-Mesh.py">CVM-Basins-Mesh.py</a><br /><a href="scripts/CVM-Basins-Search.py">CVM-Basins-Search.py</a><br /><a href="scripts/CVM-Basins-Viz.py">CVM-Basins-Viz.py</a></p>
</div>
</body>
</html>

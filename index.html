<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>SORD</title>
<style type="text/css">

body { margin: 0px; background-color: #fff; color: #000; font-family: 'Lucida Grande', Geneva, Verdana, sans-serif }
div { margin: 0px; }
div.line-block { margin: 20px; margin-top: 10px; margin-bottom: 10px; }
div.footer { margin: 20px; margin-top: 40px; }
p { margin: 20px; margin-top: 15px; margin-bottom: 15px; }
dl { margin: 20px; margin-top: 35px; margin-bottom: 15px; }
table { margin: 60px; margin-top: 0px; margin-bottom: 0px; border: none; }
td { border: none; }
pre { margin: 60px; margin-top: 15px; margin-bottom: 15px; }
h1 { margin: 0px; padding: 20px; border-top: medium solid #700;; border-bottom: medium solid #300; font-weight: lighter; color: #fff; background-color: #600; text-shadow: #000 3px 3px 3px; }
h2, h3 { padding: 5px; margin: 15px; margin-top: 20px; margin-bottom: 10px; background-color: #eee; }
a { color: #00c; text-decoration: none; }
a:hover, a:active { color: #66f; text-decoration: none; }
img { border: 15px solid #fff; padding: 0px; }

</style>
</head>
<body>
<div class="document" id="sord">
<h1 class="title">SORD</h1>

<a class="reference external image-reference" href="http://earth.usc.edu/~gely/ely-saf-surface.mov"><img align="right" alt="ely-saf-surface.jpg" class="align-right" src="ely-saf-surface.jpg" /></a>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id3">Summary</a></li>
<li><a class="reference internal" href="#news" id="id4">News</a></li>
<li><a class="reference internal" href="#license" id="id5">License</a></li>
<li><a class="reference internal" href="#author" id="id6">Author</a></li>
<li><a class="reference internal" href="#publications" id="id7">Publications</a></li>
<li><a class="reference internal" href="#download" id="id8">Download</a></li>
<li><a class="reference internal" href="#installation" id="id9">Installation</a></li>
<li><a class="reference internal" href="#basic-usage" id="id10">Basic usage</a></li>
<li><a class="reference internal" href="#examples" id="id11">Examples</a></li>
<li><a class="reference internal" href="#fortran-source-code" id="id12">Fortran source code</a></li>
<li><a class="reference internal" href="#python-wrappers" id="id13">Python wrappers</a></li>
<li><a class="reference internal" href="#development" id="id14">Development</a></li>
</ul>
</div>
<div class="section" id="summary">
<h3>Summary</h3>
<p>The Support Operator Rupture Dynamics (SORD) code simulates spontaneous rupture
within a 3D isotropic viscoelastic solid.  Wave motions are computed on a
logically rectangular hexahedral mesh, using the generalized finite difference
method of support operators.  Stiffness and viscous hourglass corrections are
employed to suppress suppress zero-energy grid oscillation modes.  The fault
surface is modeled by coupled double nodes, where the strength of the coupling
is determined by a linear slip-weakening friction law.  External boundaries may
be reflective or absorbing, where absorbing boundaries are handled using the
method of perfectly matched layers (PML).  The hexahedral mesh can accommodate
non-planar ruptures and surface topography</p>
<p>SORD is a Python module that allows for flexible scripting of jobs.  Underlying
computations are coded in Fortran 95 and parallelized for multi-processor
execution using Message Passing Interface (MPI).  The code is portable and
tested with a variety of Fortran 95 compilers, MPI implementations, operating
systems (Linux, IBM AIX, Apple OSX, SUN Solaris).</p>
</div>
<div class="section" id="news">
<h3>News</h3>
<p>2008, Nov 11. New version finished introducing a revamped I/O scheme and Python
based configuration. Beware that it is not well tested yet.</p>
</div>
<div class="section" id="license">
<h3>License</h3>
<p>SORD is open-source and released under the <a class="reference external" href="license.txt">GNU General Public License Version 3</a>.  You are free to use or redistribute the code, with the
obligation that you contribute back any modification or derived works.</p>
</div>
<div class="section" id="author">
<h3>Author</h3>
<div class="line-block">
<div class="line"><a class="reference external" href="http://earth.usc.edu/~gely">Geoffrey Ely</a></div>
<div class="line"><a class="reference external" href="http://www.scec.org/">Southern California Earthquake Center</a></div>
<div class="line"><a class="reference external" href="http://www.usc.edu/">University of Southern California</a></div>
<div class="line"><a class="reference external" href="mailto:gely&#37;&#52;&#48;usc&#46;edu">gely<span>&#64;</span>usc<span>&#46;</span>edu</a></div>
</div>
</div>
<div class="section" id="publications">
<h3>Publications</h3>
<p>The first two papers give (for wave propagation and spontaneous rupture,
respectively) the formulation, numerical algorithm, and verification of the
SORD method. The third paper presents an application to simulating earthquakes
in southern California.</p>
<p class="ref">Ely, G. P., S. M. Day, and J.-B. Minster (2008),
<em>A support-operator method for visco-elastic wave modeling in 3D heterogeneous media</em>,
Geophys. J. Int., <a class="reference external" href="http://www.blackwell-synergy.com/doi/abs/10.1111/j.1365-246X.2007.03633.x">172(1), 331-344</a>,
doi: 10.1111/j.1365-246X.2007.03633.x.
<a class="reference external" href="http://earth.usc.edu/~gely/pub/ely-som-20080426.pdf">[PDF]</a>
<a class="reference external" href="http://earth.usc.edu/~gely/pub/Ely2008a.bib">[BibTex]</a></p>
<p class="ref">Ely, G. P., S. M. Day, and J.-B. Minster (2008),
<em>A support-operator method for 3D rupture dynamics</em>,
Geophys. J. Int., in revision.
<a class="reference external" href="http://earth.usc.edu/~gely/pub/ely-sord-20080426.pdf">[PDF]</a></p>
<p class="ref">Ely, G. P., S. M. Day, and J.-B. Minster (2008),
<em>Dynamic rupture models for the southern San Andreas fault</em>,
BSSA, in revision.
<a class="reference external" href="http://earth.usc.edu/~gely/pub/ely-saf-20080426.pdf">[PDF]</a>
<a class="reference external" href="http://earth.usc.edu/~gely/ely-saf-esupp.html">[Electronic supplement]</a></p>
</div>
<div class="section" id="download">
<h3>Download</h3>
<p>Latest source code version <a class="reference external" href="sord.tgz">3.0.99</a></p>
<p>Older versions can be extracted from the source code repository (see
<a class="reference internal" href="#development">Development</a>).</p>
</div>
<div class="section" id="installation">
<h3>Installation</h3>
<ol class="arabic">
<li><p class="first">A Fortran 95 compiler is required.  SORD has been tested with GNU, IBM,
SUN, Intel, and Portland Group compilers.  GNU Fortran is a fine option if you
do not already have one.  To install GNU Fortran on Fedora or Red Hat Linux use
<tt class="docutils literal"><span class="pre">yum</span></tt>:</p>
<pre class="literal-block">
yum install gfortran
</pre>
<p>For OSX you must first install <a class="reference external" href="http://developer.apple.com/tools/xcode/">Xcode Tools</a> from Apple.  The GNU Fortran
version available from the <a class="reference external" href="http://r.research.att.com/tools">R for Mac OS X Developer's Page</a> is recommended (versions from MacPorts and
Fink seem to be problematic).</p>
</li>
<li><p class="first">MPI is required if you will be using SORD in multiprocessor mode.  SORD has
been tested with ANL MPICH2, IBM MPI, and Myricom MPICH-GM.  The <a class="reference external" href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH2</a> implementation is
recommended if you do not already have one.  The script <a class="reference external" href="extras/install-mpich.sh">install-mpich.sh</a> in the <tt class="docutils literal"><span class="pre">extras/</span></tt> directory can automate this for
you.</p>
</li>
<li><p class="first">Most system already have <a class="reference external" href="http://www.python.org/download/">Python</a>.
However, if you are not the system administrator, it is helpful to install your
own personal copy. This will enable you to install the SORD package, as well as
other useful Python packages like <a class="reference external" href="http://matplotlib.sourceforge.net/">matplotlib</a> and <a class="reference external" href="http://www.scipy.org/">SciPy</a>.
The <a class="reference external" href="extras/install-python.sh">install-python.sh</a> script in the <tt class="docutils literal"><span class="pre">extras/</span></tt>
directory can automate this for you.</p>
</li>
<li><p class="first">Next, unpack the tar archive and enter the <tt class="docutils literal"><span class="pre">sord/</span></tt> directory:</p>
<pre class="literal-block">
tar zxvf sord.tgz
cd sord/
</pre>
</li>
<li><p class="first">For simple laptop and workstation installations the default system
configuration may be adequate.  To test the default configuration run:</p>
<pre class="literal-block">
./configure.py
</pre>
<p>Larger systems with batch schedulers (such as PBS or LoadLeveler) generally
require custom configuration to specify system resources, compiler options, and
scheduler scripts.  If SORD has already been configured for your system you can
use one of the included configurations.  For example, for the TeraGrid Ranger
system at TACC, run:</p>
<pre class="literal-block">
./configure.py tacc-ranger
</pre>
<p>Each custom configuration is located in a separate sub-directory of the
<tt class="docutils literal"><span class="pre">conf/</span></tt> directory.  To create a new custom configuration, make a new
sub-directory following the format of the supplied configurations.</p>
</li>
<li><p class="first">Compile the code by running:</p>
<pre class="literal-block">
./setup.py
</pre>
</li>
<li><p class="first">To make the SORD module available you must add the enclosing directory to
your Python path. If you administer your Python installation, you can do:</p>
<pre class="literal-block">
./setup.py path
</pre>
<p>Alternatively you can use the PYTHONPATH environmental variable.</p>
</li>
</ol>
</div>
<div class="section" id="basic-usage">
<h3>Basic usage</h3>
<p>SORD is run from Python by importing the <tt class="docutils literal"><span class="pre">sord</span></tt> module and passing a
dictionary containing the input parameters to the <tt class="docutils literal"><span class="pre">sord.run()</span></tt> function.  The
file <a class="reference external" href="default-prm.py">default-prm.py</a> contains a short description of each
SORD input parameter and it's default value.  Annotated example scripts are
located in the <tt class="docutils literal"><span class="pre">examples/</span></tt> directory.  To run the layer over halfspace
example (LOH.1), do:</p>
<pre class="literal-block">
cd examples/
./loh1.py
</pre>
<p>Each time <tt class="docutils literal"><span class="pre">sord.run()</span></tt> is called, a run directory is created at the location
set by the <tt class="docutils literal"><span class="pre">rundir</span></tt> parameter, which defaults to <tt class="docutils literal"><span class="pre">run/</span></tt>.  The directory
contains the executable and scripts to run the code, and will contain all of
the generated output and metadata.  From the run directory start the job
interactively with the <tt class="docutils literal"><span class="pre">run.sh</span></tt> script:</p>
<pre class="literal-block">
cd run/
./run.sh
</pre>
<p>Or, submit the job to the batch system with the <tt class="docutils literal"><span class="pre">queue.sh</span></tt> script</p>
<pre class="literal-block">
cd run/
./queue.sh
</pre>
<p>Output (and large input, such as the material model) is stored in flat binary
binary files.  Statistic, such as peak acceleration and peak velocity, are
computed periodically during each run and stored in the <tt class="docutils literal"><span class="pre">stats/</span></tt> directory.
Internal code timings, for benchmarking performance, are collected and saved to
the <tt class="docutils literal"><span class="pre">prof/</span></tt> directory.  Inspecting these files during a run is a good way to
check that it is proceeding correctly.  The binary files can be examined with
the UNIX command <tt class="docutils literal"><span class="pre">od</span> <span class="pre">-f</span></tt> or with separate utilities included with SORD.  The
utilities are located in the <tt class="docutils literal"><span class="pre">extras/</span></tt> directory with the executables built
in the <tt class="docutils literal"><span class="pre">bin/</span></tt> directory.  They include utilities for converting between
binary and ASCII text format, converting the byte order between big and
little-endian, and computing minimum, maximum, and mean values.</p>
<p>The best place to go from here to learn more is to look at the example scripts
and <a class="reference external" href="default-prm.py">default-prm.py</a>.  Studying the Fortran source code in
the <tt class="docutils literal"><span class="pre">src/</span></tt> directory will be educational as well.  As much as possible, I
have tried to keep it clean and readable.</p>
</div>
<div class="section" id="examples">
<h3>Examples</h3>
<div class="line-block">
<div class="line"><a class="reference external" href="examples/loh1.py">loh1.py</a>: PEER LOH.1 - Layer over a halfspace, buried double couple source</div>
<div class="line"><a class="reference external" href="examples/tpv3.py">tpv3.py</a>: TPV3 - SCEC validation problem version 3</div>
<div class="line"><a class="reference external" href="examples/saf.py">saf.py</a>: San Andreas Fault, northward dynamic rupture, topography, SCEC-CVM4</div>
</div>
</div>
<div class="section" id="fortran-source-code">
<h3>Fortran source code</h3>
<div class="line-block">
<div class="line"><a class="reference external" href="src/sord.f90">sord.f90</a>: SORD main program</div>
<div class="line"><a class="reference external" href="src/globals.f90">globals.f90</a>: Global variables</div>
<div class="line"><a class="reference external" href="src/parameters.f90">parameters.f90</a>: Read model parameters</div>
<div class="line"><a class="reference external" href="src/setup.f90">setup.f90</a>: Setup model dimensions</div>
<div class="line"><a class="reference external" href="src/arrays.f90">arrays.f90</a>: Allocate arrays</div>
<div class="line"><a class="reference external" href="src/gridgen.f90">gridgen.f90</a>: Grid generation</div>
<div class="line"><a class="reference external" href="src/material.f90">material.f90</a>: Material model</div>
<div class="line"><a class="reference external" href="src/resample.f90">resample.f90</a>: Resample material arrays</div>
<div class="line"><a class="reference external" href="src/timestep.f90">timestep.f90</a>: Time integration</div>
<div class="line"><a class="reference external" href="src/stress.f90">stress.f90</a>: Stress calculation</div>
<div class="line"><a class="reference external" href="src/source.f90">source.f90</a>: Moment source</div>
<div class="line"><a class="reference external" href="src/acceleration.f90">acceleration.f90</a>: Acceleration calculation</div>
<div class="line"><a class="reference external" href="src/hourglass.f90">hourglass.f90</a>: Hourglass corrections</div>
<div class="line"><a class="reference external" href="src/bc.f90">bc.f90</a>: Boundary conditions</div>
<div class="line"><a class="reference external" href="src/diffcn.f90">diffcn.f90</a>: Difference operator, cell to node</div>
<div class="line"><a class="reference external" href="src/diffnc.f90">diffnc.f90</a>: Difference operator, node to cell</div>
<div class="line"><a class="reference external" href="src/rupture.f90">rupture.f90</a>: Rupture boundary condition</div>
<div class="line"><a class="reference external" href="src/surfnormals.f90">surfnormals.f90</a>: Find surface normals</div>
<div class="line"><a class="reference external" href="src/fieldio.f90">fieldio.f90</a>: Field input and output</div>
<div class="line"><a class="reference external" href="src/checkpoint.f90">checkpoint.f90</a>: Checkpoint restart</div>
<div class="line"><a class="reference external" href="src/stats.f90">stats.f90</a>: Collect statistics</div>
<div class="line"><a class="reference external" href="src/serial.f90">serial.f90</a>: Collective routines - serial version</div>
<div class="line"><a class="reference external" href="src/mpi.f90">mpi.f90</a>: Collective routines - MPI version</div>
<div class="line"><a class="reference external" href="src/frio.f90">frio.f90</a>: Fortran real binary I/O</div>
<div class="line"><a class="reference external" href="src/util.f90">util.f90</a>: Miscellaneous utilities</div>
</div>
</div>
<div class="section" id="python-wrappers">
<h3>Python wrappers</h3>
<div class="line-block">
<div class="line"><a class="reference external" href="run.py">run.py</a>: SORD main module</div>
<div class="line"><a class="reference external" href="default-cfg.py">default-cfg.py</a>: Default configuration parameters</div>
<div class="line"><a class="reference external" href="default-prm.py">default-prm.py</a>: Default simulation parameters</div>
<div class="line"><a class="reference external" href="fieldnames.py">fieldnames.py</a>: Field variable information</div>
<div class="line"><a class="reference external" href="configure.py">configure.py</a>: Read configuration files</div>
<div class="line"><a class="reference external" href="setup.py">setup.py</a>: Build SORD binaries and documentation</div>
<div class="line"><a class="reference external" href="remote.py">remote.py</a>: Remote install and execution</div>
<div class="line"><a class="reference external" href="util.py">util.py</a>: General utilities</div>
</div>
</div>
<div class="section" id="development">
<h3>Development</h3>
<p>Suggestions for improvements, and contributions to the SORD code and
documentation are greatly appreciated.  The latest development version can be
obtained from the <a class="reference external" href="http://bazaar-vcs.org/">Bazaar</a> source code repository
with:</p>
<pre class="literal-block">
bzr checkout http://earth.usc.edu/~gely/sord
</pre>
<p>Why Bazaar?  Because Subversion is painful to use in my opinion.  Better,
modern alternatives are available.  <a class="reference external" href="http://www.selenic.com/mercurial/wiki/">Mercurial</a>, another strong candidate, was also
considered.  The simplest way to install Bazaar is to use Python <a class="reference external" href="http://pypi.python.org/pypi/setuptools">Easy Install</a>:</p>
<pre class="literal-block">
easy_install bzr
</pre>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="readme.txt">View document source</a>.
Generated on: 2008-11-21.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
